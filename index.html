<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>We'll Be Right Back</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #f7f7f7;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            overflow: hidden;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            color: #5f6368;
            margin: 0;
            font-weight: 400;
        }

        .header p {
            font-size: 1.1rem;
            color: #80868b;
            margin: 10px 0 0 0;
        }

        #gameContainer {
            position: relative;
            margin: 20px 0;
        }

        #gameCanvas {
            border: 1px solid #d3d3d3;
            background: #f7f7f7;
            display: block;
        }

        .instructions {
            text-align: center;
            margin-top: 20px;
            color: #80868b;
            font-size: 0.9rem;
        }

        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: #5f6368;
            font-weight: 600;
            display: none;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>We'll Be Right Back</h1>
    </div>

    <div id="gameContainer">
        <canvas id="gameCanvas" width="600" height="150"></canvas>
        <div class="game-over" id="gameOver">
            <div>Game Over</div>
            <div style="font-size: 0.8rem; margin-top: 5px;">Press SPACE to restart</div>
        </div>
    </div>

    <div class="instructions">
        Press SPACE to start â€¢ Press SPACE to jump
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const gameOverElement = document.getElementById('gameOver');

        // Game variables
        let gameSpeed = 3;
        let gravity = 0.5;
        let score = 0;
        let highScore = localStorage.getItem('dinoHighScore') || 0;
        let gameRunning = false;
        let gameOver = false;

        // Dino object
        const dino = {
            x: 50,
            y: canvas.height - 60,
            width: 40,
            height: 40,
            velY: 0,
            jumping: false,
            grounded: true,
            color: '#535353'
        };

        // Obstacles array
        let obstacles = [];

        // Ground
        const ground = {
            x: 0,
            y: canvas.height - 20,
            width: canvas.width,
            height: 20,
            color: '#535353'
        };

        // Input handling
        document.addEventListener('keydown', function(e) {
            if (e.code === 'Space') {
                e.preventDefault();
                if (!gameRunning && !gameOver) {
                    startGame();
                } else if (gameOver) {
                    resetGame();
                } else if (dino.grounded) {
                    jump();
                }
            }
        });

        function startGame() {
            gameRunning = true;
            gameOver = false;
            score = 0;
            obstacles = [];
            gameOverElement.style.display = 'none';
            spawnObstacle();
            gameLoop();
        }

        function resetGame() {
            dino.y = canvas.height - 60;
            dino.velY = 0;
            dino.jumping = false;
            dino.grounded = true;
            startGame();
        }

        function jump() {
            if (dino.grounded) {
                dino.velY = -12;
                dino.jumping = true;
                dino.grounded = false;
                score += 1; // Add 1 point for each jump
            }
        }

        function spawnObstacle() {
            if (!gameRunning) return;
            
            const obstacle = {
                x: canvas.width,
                y: canvas.height - 40,
                width: 20,
                height: 20,
                color: '#535353'
            };
            obstacles.push(obstacle);
            
            // Variable spacing: some close (800-1200ms), some far (1500-2500ms)
            const isClose = Math.random() < 0.4; // 40% chance for close obstacles
            const nextSpawnTime = isClose ? 
                Math.random() * 400 + 800 :  // Close: 800-1200ms
                Math.random() * 1000 + 1500; // Far: 1500-2500ms
            
            setTimeout(spawnObstacle, nextSpawnTime);
        }

        function updateDino() {
            // Apply gravity
            if (!dino.grounded) {
                dino.velY += gravity;
            }

            dino.y += dino.velY;

            // Check ground collision
            if (dino.y >= canvas.height - 60) {
                dino.y = canvas.height - 60;
                dino.grounded = true;
                dino.jumping = false;
                dino.velY = 0;
            }
        }

        function updateObstacles() {
            for (let i = obstacles.length - 1; i >= 0; i--) {
                obstacles[i].x -= gameSpeed;
                
                // Remove obstacles that are off screen
                if (obstacles[i].x + obstacles[i].width < 0) {
                    obstacles.splice(i, 1);
                }
            }
        }

        function checkCollisions() {
            for (let obstacle of obstacles) {
                if (dino.x < obstacle.x + obstacle.width &&
                    dino.x + dino.width > obstacle.x &&
                    dino.y < obstacle.y + obstacle.height &&
                    dino.y + dino.height > obstacle.y) {
                    endGame();
                    return;
                }
            }
        }

        function endGame() {
            gameRunning = false;
            gameOver = true;
            gameOverElement.style.display = 'block';
            
            if (score > highScore) {
                highScore = score;
                localStorage.setItem('dinoHighScore', highScore);
            }
        }

        function drawDino() {
            ctx.fillStyle = '#535353';
            
            // Dino body (main torso)
            ctx.fillRect(dino.x + 6, dino.y + 15, 28, 20);
            
            // Dino head
            ctx.fillRect(dino.x + 22, dino.y + 5, 18, 18);
            
            // Dino neck
            ctx.fillRect(dino.x + 18, dino.y + 12, 8, 8);
            
            // Dino tail
            ctx.fillRect(dino.x, dino.y + 18, 12, 8);
            ctx.fillRect(dino.x - 4, dino.y + 20, 8, 4);
            
            // Eye
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(dino.x + 32, dino.y + 8, 3, 3);
            ctx.fillStyle = '#000000';
            ctx.fillRect(dino.x + 33, dino.y + 9, 1, 1);
            
            // Dino legs (animated running)
            ctx.fillStyle = '#535353';
            const legAnimation = Math.floor(Date.now() / 150) % 4;
            
            if (!gameRunning || dino.jumping) {
                // Static legs when not running or jumping
                ctx.fillRect(dino.x + 10, dino.y + 35, 4, 8);
                ctx.fillRect(dino.x + 24, dino.y + 35, 4, 8);
            } else {
                // Animated running legs
                switch(legAnimation) {
                    case 0:
                        ctx.fillRect(dino.x + 10, dino.y + 35, 4, 8);
                        ctx.fillRect(dino.x + 24, dino.y + 33, 4, 10);
                        break;
                    case 1:
                        ctx.fillRect(dino.x + 10, dino.y + 33, 4, 10);
                        ctx.fillRect(dino.x + 24, dino.y + 35, 4, 8);
                        break;
                    case 2:
                        ctx.fillRect(dino.x + 10, dino.y + 35, 4, 8);
                        ctx.fillRect(dino.x + 24, dino.y + 35, 4, 8);
                        break;
                    case 3:
                        ctx.fillRect(dino.x + 10, dino.y + 35, 4, 8);
                        ctx.fillRect(dino.x + 24, dino.y + 35, 4, 8);
                        break;
                }
            }
            
            // Dino arms
            ctx.fillRect(dino.x + 8, dino.y + 18, 3, 8);
            ctx.fillRect(dino.x + 14, dino.y + 20, 3, 6);
            
            // Spikes on back
            ctx.fillRect(dino.x + 12, dino.y + 12, 2, 4);
            ctx.fillRect(dino.x + 16, dino.y + 10, 2, 6);
            ctx.fillRect(dino.x + 20, dino.y + 12, 2, 4);
        }

        function drawObstacles() {
            ctx.fillStyle = '#535353';
            for (let obstacle of obstacles) {
                ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
            }
        }

        function drawGround() {
            ctx.fillStyle = ground.color;
            ctx.fillRect(ground.x, ground.y, ground.width, ground.height);
            
            // Draw ground pattern
            ctx.strokeStyle = '#535353';
            ctx.lineWidth = 1;
            for (let i = 0; i < canvas.width; i += 20) {
                ctx.beginPath();
                ctx.moveTo(i, ground.y);
                ctx.lineTo(i + 10, ground.y);
                ctx.stroke();
            }
        }

        function drawScore() {
            ctx.fillStyle = '#535353';
            ctx.font = '16px monospace';
            ctx.textAlign = 'right';
            ctx.fillText('Score: ' + score, canvas.width - 10, 30);
            ctx.fillText('Best: ' + highScore, canvas.width - 10, 50);
        }

        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        function gameLoop() {
            if (!gameRunning) return;

            clearCanvas();
            
            updateDino();
            updateObstacles();
            checkCollisions();
            
            drawGround();
            drawDino();
            drawObstacles();
            drawScore();
            
            // Increase game speed gradually
            gameSpeed += 0.001;
            
            requestAnimationFrame(gameLoop);
        }

        // Initial draw
        function initialDraw() {
            clearCanvas();
            drawGround();
            drawDino();
            drawScore();
        }

        initialDraw();
    </script>
</body>
</html>